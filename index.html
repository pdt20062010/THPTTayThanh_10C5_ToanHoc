<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>THPT T√¢y Th·∫°nh - L·ªõp 10C5 | ƒêo chi·ªÅu cao c√¢y</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#60a5fa;--muted:#94a3b8;--glass: rgba(255,255,255,0.04)}
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071023 0%, #082036 100%);color:#e6eef8;font-size:18px}
    .wrap{max-width:1100px;margin:32px auto;padding:40px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:20px;box-shadow:0 8px 36px rgba(2,6,23,0.6)}
    header{display:flex;gap:20px;align-items:center}
    .logo{width:190px;height:90px;border-radius:20px;background:var(--glass);display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--accent);font-size:32px}
    h1{margin:0;font-size:28px}
    p.lead{color:var(--muted);margin:12px 0 24px;font-size:18px}
    .grid{display:grid;grid-template-columns:1fr 400px;gap:24px}
    .card{background:var(--card);padding:24px;border-radius:16px;font-size:18px}
    label{display:block;font-size:16px;color:var(--muted);margin-bottom:8px}
    input[type=number], input[type=text], button{width:100%;padding:14px 16px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;font-size:18px}
    .row{display:flex;gap:14px}
    .row > *{flex:1}
    .result{font-size:24px;font-weight:700;color:var(--accent);margin-top:10px}
    .hint{font-size:15px;color:var(--muted);margin-top:8px}
    .steps{font-size:16px;color:#dbeafe;background:linear-gradient(180deg, rgba(96,165,250,0.04), rgba(255,255,255,0.01));padding:14px;border-radius:10px;margin-top:14px}
    .controls{display:flex;gap:12px;margin-top:14px}
    .small{font-size:14px;color:var(--muted)}
    .meter{display:flex;align-items:center;gap:8px;font-size:16px}
    .container {
  max-width: 1200px;   /* cho khung r·ªông t·ªëi ƒëa */
  margin: 0 auto;      /* cƒÉn gi·ªØa theo chi·ªÅu ngang */
  padding: 20px;
}
    footer{margin-top:20px;text-align:center;color:var(--muted);font-size:15px}
button, .device-btn {
  width: 100%;
  padding: 14px 16px;
  border-radius: 15px;
  border: 2px solid var(--accent);
  background: transparent;
  color: var(--accent);
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 0 10px rgba(96,165,250,0.6), 0 0 20px rgba(96,165,250,0.3) inset;
}

button:hover, .device-btn:hover {
  background: var(--accent);
  color: #0f1724;
  box-shadow: 0 0 20px rgba(96,165,250,0.9), 0 0 40px rgba(96,165,250,0.6) inset;
}
    .visual{height:260px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.006));display:flex;align-items:center;justify-content:center;flex-direction:column}
    .meter-svg{width:240px;height:140px}
    .warning{color:#ffcccc;font-size:15px}
   /* Desktop r·ªông */
@media (min-width:1200px){
  .wrap{max-width: 95%; padding:50px;}
  .grid{grid-template-columns: 2fr 1fr;}
}

/* Tablet ngang ho·∫∑c v·ª´a */
@media (max-width:880px){
  .grid{grid-template-columns:1fr;}
  .wrap{margin:16px; padding:20px;}
  .meter-svg{width:100%; height:auto;}
}

/* ƒêi·ªán tho·∫°i nh·ªè */
@media (max-width:600px){
  body{font-size:16px}
  .wrap{padding:16px}
  h1{font-size:22px}
  .logo{font-size:24px; width:120px; height:60px}
  input, button{font-size:16px; padding:12px}
  .result{font-size:20px}
  .meter{font-size:14px}
  .meter-svg{width:100%; max-width:300px; height:auto}
}

  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="logo">10C5</div>
      <div>
        <h1>THPT T√¢y Th·∫°nh ‚Äî ƒêo chi·ªÅu cao c√¢y b·∫±ng g√≥c nh√¨n üìêüå≥</h1>
        <p class="lead">Trang th·ª±c h√†nh m√¥n To√°n: nh·∫≠p kho·∫£ng c√°ch v√† g√≥c, ho·∫∑c d√πng c·∫£m bi·∫øn nghi√™ng tr√™n ƒëi·ªán tho·∫°i ‚Äî trang s·∫Ω t√≠nh ngay chi·ªÅu cao ∆∞·ªõc l∆∞·ª£ng c·ªßa c√¢y. D√πng cho b√†i t·∫≠p th·ª±c h√†nh ngo√†i tr·ªùi.</p>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <h2>C√°c tham s·ªë ƒëo</h2>
        <div style="margin-top:14px">
          <label>Kho·∫£ng c√°ch t·ª´ ch√¢n b·∫°n ƒë·∫øn g·ªëc c√¢y (m)</label>
          <input id="distance" type="number" min="0" step="0.01" value="5">
          <div class="hint">V√≠ d·ª•: ƒë·ª©ng c√°ch g·ªëc c√¢y 5 m√©t.</div>
        </div>

        <div style="margin-top:14px">
          <label>G√≥c nh√¨n (ƒë·ªô)</label>
          <div class="row">
            <input id="angle" type="number" min="0" max="89.9" step="0.1" value="30">
          </div>
          <div class="hint">G√≥c l√† g√≥c nh√¨n t·ª´ m·∫Øt b·∫°n t·ªõi ƒë·ªânh c√¢y ph√≠a tr√™n (ƒë·ªô). C√≥ th·ªÉ nh·∫≠p th·ªß c√¥ng. </div>
        </div>

        <div style="margin-top:14px">
          <label>Chi·ªÅu cao m·∫Øt b·∫°n so v·ªõi m·∫∑t ƒë·∫•t (m)</label>
          <input id="eyeHeight" type="number" min="0" step="0.01" value="1.6">
          <div class="hint">V√≠ d·ª• trung b√¨nh kho·∫£ng 1.5‚Äì1.7 m. N·∫øu b·∫°n ƒëo t·ª´ cao th·∫•p kh√°c, ch·ªânh cho ƒë√∫ng.</div>
        </div>

        <div class="controls">
          <button id="calcBtn">T√≠nh ngay ‚ú®</button>
          <button id="resetBtn" class="device-btn">ƒê·∫∑t l·∫°i</button>
          
        </div>

        <div class="steps" id="explain">
          <div class="small">C√¥ng th·ª©c: <strong>chi·ªÅu cao c√¢y ‚âà kho·∫£ng c√°ch √ó tan(g√≥c) + chi·ªÅu cao m·∫Øt</strong></div>
          <div class="small" style="margin-top:8px">Gi·∫£i th√≠ch: v·∫Ω tam gi√°c vu√¥ng: tan(g√≥c) = ƒë·ªëi / k·ªÅ ‚Üí ƒë·ªëi = k·ªÅ √ó tan(g√≥c) (ƒë·ªëi l√† ph·∫ßn tr√™n t√≠nh t·ª´ m·∫Øt ƒë·∫øn ƒë·ªânh c√¢y)</div>
        </div>

        <div class="result" id="result">Chi·ªÅu cao c√¢y: ‚Äî m</div>
        <div class="hint" id="calcSteps"></div>

      </section>

      <aside class="card">
        <h3>Minh h·ªça tr·ª±c quan</h3>
        <div class="visual">
          <svg class="meter-svg" viewBox="0 0 200 120" xmlns="http://www.w3.org/2000/svg" id="svgVis">
            <defs><linearGradient id="g" x1="0" x2="0" y1="0" y2="1"><stop offset="0" stop-color="#60a5fa" stop-opacity="0.9"/><stop offset="1" stop-color="#7dd3fc" stop-opacity="0.6"/></linearGradient></defs>
            <rect x="0" y="0" width="200" height="120" fill="transparent" />
            <line x1="5" y1="105" x2="195" y2="105" stroke="#123" stroke-width="2" />
            <circle id="eye" cx="30" cy="85" r="4" fill="#fff" />
            <line id="eyeToTop" x1="30" y1="85" x2="120" y2="40" stroke="url(#g)" stroke-width="3" stroke-linecap="round" />
            <rect id="treeTrunk" x="115" y="70" width="8" height="35" fill="#264653" rx="2" />
            <circle id="treeTop" cx="118" cy="62" r="16" fill="#2a9d8f" />
            <polyline id="angleArc" points="30,85 60,75 90,65" stroke="#94a3b8" stroke-width="1.4" fill="none" stroke-dasharray="4 3" />
            <text id="angleText" x="60" y="78" font-size="14" fill="#e6eef8">30¬∞</text>
            <text id="heightText" x="110" y="60" font-size="14" fill="#e6eef8">H‚âà‚Äîm</text>
            <text x="8" y="118" font-size="12" fill="#94a3b8">B·∫°n</text>
            <text x="150" y="118" font-size="12" fill="#94a3b8">C√¢y</text>
          </svg>

          <div class="meter" style="margin-top:10px">
            <div>G√≥c: <span id="angleShow">30¬∞</span></div>
            <div style="width:8px"></div>
            <div>Kho·∫£ng c√°ch: <span id="distShow">5 m</span></div>
          </div>

          <div class="hint" style="margin-top:10px"></div>
          <div class="hint" style="margin-top:10px"></div>

          
        </div>

        <div style="margin-top:14px">
          <div class="small">Ghi ch√∫ an to√†n:</div>
          <ul class="small" style="padding-left:20px;color:var(--muted);margin-top:8px">
            <li>ƒê·ª´ng tr√®o l√™n c√¢y ƒë·ªÉ ƒëo ‚Äî ch·ªâ d√πng g√≥c v√† kho·∫£ng c√°ch.</li>
            <li>ƒê·∫£m b·∫£o kho·∫£ng c√°ch ƒëo l√† ƒë∆∞·ªùng th·∫≥ng ngang tr√™n m·∫∑t ƒë·∫•t (k·ªÅ c·ªßa tam gi√°c vu√¥ng).</li>
          </ul>
        </div>
      </aside>
    </div>

    <footer>Th·ª±c h√†nh: L·ªõp 10C5 ‚Äî THPT T√¢y Th·∫°nh ‚Ä¢ Gi√°o vi√™n giao: ·ª©ng d·ª•ng to√°n trong ƒë·ªùi s·ªëng ‚ú®</footer>
  </div>

  <script>
    function deg2rad(d){return d * Math.PI / 180}
    const distanceEl = document.getElementById('distance')
    const angleEl = document.getElementById('angle')
    const eyeEl = document.getElementById('eyeHeight')
    const calcBtn = document.getElementById('calcBtn')
    const resetBtn = document.getElementById('resetBtn')
    const resultEl = document.getElementById('result')
    const calcSteps = document.getElementById('calcSteps')
    const angleShow = document.getElementById('angleShow')
    const distShow = document.getElementById('distShow')
    const angleText = document.getElementById('angleText')
    const heightText = document.getElementById('heightText')
    const eyeToTop = document.getElementById('eyeToTop')
    const treeTrunk = document.getElementById('treeTrunk')
    const treeTop = document.getElementById('treeTop')

    function formatNum(x){return Math.round(x*100)/100}

    function updateVisual(angleDeg, distance, height){
      const a = Math.max(1, Math.min(80, angleDeg))
      angleShow.textContent = formatNum(angleDeg) + '¬∞'
      distShow.textContent = formatNum(distance) + ' m'
      angleText.textContent = formatNum(angleDeg) + '¬∞'
      heightText.textContent = 'H‚âà' + (isFinite(height) ? formatNum(height) + 'm' : '‚Äî')
      const eyeX = 30
      const eyeY = 85
      const treeX = Math.min(150, 30 + Math.max(30, distance*10))
      const rad = deg2rad(angleDeg)
      const topX = treeX
      const topY = eyeY - Math.tan(rad) * (treeX - eyeX)
      eyeToTop.setAttribute('x1', eyeX)
      eyeToTop.setAttribute('y1', eyeY)
      eyeToTop.setAttribute('x2', topX)
      eyeToTop.setAttribute('y2', topY)
      treeTrunk.setAttribute('x', treeX - 4)
      const trunkBottom = 105
      const trunkHeightPx = Math.max(30, Math.min(80, (height-1)*9))
      treeTrunk.setAttribute('y', trunkBottom - trunkHeightPx)
      treeTrunk.setAttribute('height', trunkHeightPx)
      treeTop.setAttribute('cx', treeX)
      treeTop.setAttribute('cy', trunkBottom - trunkHeightPx - 12)
    }

    function computeHeight(distance, angleDeg, eyeHeight){
      const rad = deg2rad(angleDeg)
      const opposite = distance * Math.tan(rad)
      const H = opposite + Number(eyeHeight)
      return {H, rad, opposite}
    }

    function showCalc(){
      const d = Number(distanceEl.value)
      const a = Number(angleEl.value)
      const e = Number(eyeEl.value)
      if (!isFinite(d) || d <= 0){ resultEl.textContent = 'Vui l√≤ng nh·∫≠p kho·∫£ng c√°ch h·ª£p l·ªá (m)'; resultEl.classList.add('warning'); return }
      if (!isFinite(a) || a <= 0 || a >= 90){ resultEl.textContent = 'G√≥c ph·∫£i n·∫±m trong (0,90).'; resultEl.classList.add('warning'); return }
      if (!isFinite(e) || e <= 0){ resultEl.textContent = 'Nh·∫≠p chi·ªÅu cao m·∫Øt h·ª£p l·ªá.'; resultEl.classList.add('warning'); return }

      const {H, rad, opposite} = computeHeight(d,a,e)
      resultEl.classList.remove('warning')
      resultEl.textContent = 'Chi·ªÅu cao c√¢y: ' + formatNum(H) + ' m'
      calcSteps.innerHTML = `T√≠nh: tan(${a}¬∞) = ${formatNum(opposite)} / ${d} ‚Üí ph·∫ßn tr√™n = ${formatNum(opposite)} m<br>Chi·ªÅu cao t·ªïng = ph·∫ßn tr√™n + chi·ªÅu cao m·∫Øt = ${formatNum(opposite)} + ${formatNum(e)} = <strong>${formatNum(H)} m</strong>.`
      updateVisual(a,d,H)
    }

    calcBtn.addEventListener('click', showCalc)
    distanceEl.addEventListener('input', showCalc)
    angleEl.addEventListener('input', showCalc)
    eyeEl.addEventListener('input', showCalc)

    resetBtn.addEventListener('click', ()=>{
  distanceEl.value = 0
  angleEl.value = 0
  eyeEl.value = 0
  resultEl.textContent = 'Chi·ªÅu cao c√¢y: ‚Äî m'
  calcSteps.textContent = ''
  updateVisual(0,0,0)   // reset lu√¥n ph·∫ßn minh h·ªça
})


    let sensorActive = false
    useSensorBtn.addEventListener('click', async ()=>{
      if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function'){
        try{
          const perm = await DeviceOrientationEvent.requestPermission()
          if (perm !== 'granted'){
            alert('B·∫°n c·∫ßn cho ph√©p c·∫£m bi·∫øn ƒë·ªÉ d√πng t√≠nh nƒÉng n√†y.')
            return
          }
        }catch(err){alert('Kh√¥ng th·ªÉ xin quy·ªÅn c·∫£m bi·∫øn: ' + err.message);return}
      }

      if (sensorActive){
        window.removeEventListener('deviceorientation', handleOrientation)
        useSensorBtn.textContent = 'D√πng c·∫£m bi·∫øn nghi√™ng (mobile)'
        sensorActive = false
        return
      }

      if ('DeviceOrientationEvent' in window){
        window.addEventListener('deviceorientation', handleOrientation, true)
        sensorActive = true
        useSensorBtn.textContent = 'T·∫Øt c·∫£m bi·∫øn'
      } else {
        alert('Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ DeviceOrientation. D√πng nh·∫≠p tay thay th·∫ø.')
      }
    })

    function handleOrientation(ev){
      let beta = ev.beta
      if (beta === null || beta === undefined) return
      let angleApprox = Math.abs(beta)
      if (angleApprox < 5) angleApprox = 5
      if (angleApprox > 85) angleApprox = 85
      angleEl.value = Math.round(angleApprox*10)/10
      showCalc()
    }

    showCalc()
  </script>
</body>
</html>